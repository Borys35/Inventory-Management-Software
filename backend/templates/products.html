{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Products{% endblock %}</h1>
{% endblock %}

{% block content %}
    <form method="POST" class="form" action="{{ url_for('product.create') }}">
    
        <label>
            Product Name:
            <input type="text" name="name" required />
        </label>
        <br />
        
        <label>
            SKU (Stock Keeping Unit):
            <input type="text" name="sku" required />
        </label>
        <br />
        
        <label>
            Description:
            <textarea name="description" rows="4"></textarea>
        </label>
        <br />
        
        {# <label>
            Supplier ID:
            <select name="supplier_id">
                {% for supplier in suppliers %}
                    <option value="{{ supplier.id }}">{{ supplier.name }}</option>
                {% endfor %}
            </select>
        </label>
        <br /> #}
        
        <label>
            Manufacturer ID:
            <select name="manufacturer_id">
                {% for manufacturer in manufacturers %}
                    <option value="{{ manufacturer.id }}">{{ manufacturer.name }}</option>
                {% endfor %}
            </select>
        </label>
        <br />
        
        <label>
            Reorder Level:
            <input type="number" name="reorder_level" value="10" min="0" />
        </label>
        <br />
        
        <input type="submit" value="Create Product" />
    </form>

    <hr style="margin: 30px 0; border: 0; border-top: 1px solid #ccc;">

    <div style="margin-bottom: 20px; padding: 15px; background-color: #f0f0f0; border-radius: 5px;">
        <h3 style="margin-top: 0;">Filter Products</h3>
        <form method="GET" action="{{ url_for('product.get_all') }}" style="display: flex; gap: 10px; align-items: center;">
            <input type="text" name="search" placeholder="Search by Name or SKU..." 
                   value="{{ search_query }}" style="padding: 8px; width: 300px;">
            
            <button type="submit" style="padding: 8px 15px; cursor: pointer; background-color: #1D546D; color: white; border: none;">Search</button>
            
            {% if search_query %}
                <a href="{{ url_for('product.get_all') }}">
                    <button type="button" style="padding: 8px 15px; background-color: #6c757d; color: white; border: none; cursor: pointer;">Clear Filter</button>
                </a>
            {% endif %}
        </form>
    </div>

    <table>
        <tr>
            <th>ID</th>
            <th>SKU</th>
            <th>Name</th>
            <th>Quantity</th>
            <th>Description</th>
            <th>Specifications</th>
            <th>Supplier</th>
            <th>Manufacturer</th>
            <th>Reorder level</th>
            <th>Created At</th>
        </tr>
        {% for product in products %}
            <tr>
                <td>{{ product.id }}</td>
                <td>{{ product.sku }}</td>
                <td>{{ product.name }}</td>
                <td>{{ product.quantity }}</td>
                <td>{{ product.description }}</td>
                <td>{{ product.specifications }}</td>
                <td>{{ product.supplier_id }}</td>
                <td>{{ product.manufacturer_id }}</td>
                <td>{{ product.reorder_level }}</td>
                <td>{{ product.created_at }}</td>
                <td><a href="{{url_for('product.get_one', product_id = product.id)}}">View details</a></td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}