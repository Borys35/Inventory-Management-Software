{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Documents{% endblock %}</h1>
{% endblock %}

{% block content %}
    <div>
        <form class="form" method="POST" action="{{ url_for('document.create_document') }}">
            <label>Document Number (np. PZ/1/2026)
            <input type="text" name="document_number" required placeholder="Nr dokumentu"/>
            </label>
            <br/>
            
            <label>Type
            <select name="document_type" required style="padding: 5px;">
                <option value="PZ">PZ (PrzyjÄ™cie od dostawcy)</option>
                <option value="WZ">WZ (Wydanie dla klienta)</option>
                <option value="PW">PW (PrzychÃ³d wewnÄ™trzny)</option>
                <option value="RW">RW (RozchÃ³d wewnÄ™trzny)</option>
            </select>
            </label>
            <br/>

            <label>PowiÄ…zana Faktura (Opcjonalnie)
            <select name="invoice_id" style="padding: 5px;">
                <option value="">-- Brak --</option>
                {% for inv in invoices %}
                    <option value="{{ inv.id }}">{{ inv.invoice_number }} ({{ inv.net_cost }} PLN netto)</option>
                {% endfor %}
            </select>
            </label>
            <br/>
            
            <label>Date
                <input type="date" name="document_date" />
            </label>
            <br/>
            <button type="submit">Create Document</button>
        </form>
    </div>

    <table border="1" cellpadding="5" cellspacing="0" style="width: 100%; margin-top: 20px;">
        <thead>
            <tr style="background-color: #eee;">
                <th>ID</th>
                <th>Numer</th>
                <th>Typ</th>
                <th>PowiÄ…zana Faktura</th> <th>Data dokumentu</th>
            </tr>
        </thead>
        <tbody>
            {% for doc in documents %}
            <tr>
                <td>{{ doc.id }}</td>
                <td><strong>{{ doc.document_number }}</strong></td>
                <td>
                    {% if doc.document_type == 'PZ' %}
                        <span style="color: green;">PZ (PrzyjÄ™cie)</span>
                    {% elif doc.document_type == 'WZ' %}
                        <span style="color: blue;">WZ (Wydanie)</span>
                    {% else %}
                        {{ doc.document_type }}
                    {% endif %}
                </td>
                <td>
                    {% if doc.invoice_number %}
                        <a href="{{ url_for('invoice.list_invoices') }}" style="text-decoration: none; color: #333;">
                            ðŸ“Ž {{ doc.invoice_number }}
                        </a>
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td>{{ doc.document_date }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5">Brak dokumentÃ³w. Dodaj pierwszy powyÅ¼ej.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}